{"ast":null,"code":"import _objectSpread from\"/Volumes/Work/Work/react-invoice-generator-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Volumes/Work/Work/react-invoice-generator-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import Slider from'rc-slider';import{Image}from'@react-pdf/renderer';import useOnClickOutside from'../hooks/useOnClickOutside';import compose from'../styles/compose';import'rc-slider/assets/index.css';var EditableFileImage=function EditableFileImage(_ref){var className=_ref.className,placeholder=_ref.placeholder,value=_ref.value,width=_ref.width,onChangeImage=_ref.onChangeImage,onChangeWidth=_ref.onChangeWidth,pdfMode=_ref.pdfMode;var fileInput=useRef(null);var widthWrapper=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditing=_useState2[0],setIsEditing=_useState2[1];var marks={100:'100px',150:'150px',200:'200px',250:'250px'};var handleClickOutside=function handleClickOutside(){if(isEditing){setIsEditing(false);}};useOnClickOutside(widthWrapper,handleClickOutside);var handleUpload=function handleUpload(){var _fileInput$current;fileInput===null||fileInput===void 0?void 0:(_fileInput$current=fileInput.current)===null||_fileInput$current===void 0?void 0:_fileInput$current.click();};var handleChangeImage=function handleChangeImage(){var _fileInput$current2;if(fileInput===null||fileInput===void 0?void 0:(_fileInput$current2=fileInput.current)===null||_fileInput$current2===void 0?void 0:_fileInput$current2.files){var files=fileInput.current.files;if(files.length>0&&typeof onChangeImage==='function'){var reader=new FileReader();reader.addEventListener('load',function(){if(typeof reader.result==='string'){onChangeImage(reader.result);}});reader.readAsDataURL(files[0]);}}};var handleChangeWidth=function handleChangeWidth(value){if(typeof onChangeWidth==='function'){onChangeWidth(value);}};var handleEdit=function handleEdit(){setIsEditing(!isEditing);};var clearImage=function clearImage(){if(typeof onChangeImage==='function'){onChangeImage('');}};if(pdfMode){if(value){return/*#__PURE__*/React.createElement(Image,{style:_objectSpread(_objectSpread({},compose(\"image \".concat(className?className:''))),{},{maxWidth:width}),src:value});}else{return/*#__PURE__*/React.createElement(React.Fragment,null);}}return/*#__PURE__*/React.createElement(\"div\",{className:\"image \".concat(value?'mb-5':'',\" \").concat(className?className:'')},!value?/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image__upload\",onClick:handleUpload},placeholder):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"img\",{src:value,className:\"image__img\",alt:placeholder,style:{maxWidth:width||100}}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image__change\",onClick:handleUpload},\"Change Image\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image__edit\",onClick:handleEdit},\"Resize Image\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image__remove\",onClick:clearImage},\"Remove\"),isEditing&&/*#__PURE__*/React.createElement(\"div\",{ref:widthWrapper,className:\"image__width-wrapper\"},/*#__PURE__*/React.createElement(Slider,{min:100,max:250,marks:marks,included:false,step:1,onChange:handleChangeWidth,defaultValue:width||100}))),/*#__PURE__*/React.createElement(\"input\",{ref:fileInput,tabIndex:-1,type:\"file\",accept:\"image/*\",className:\"image__file\",onChange:handleChangeImage}));};export default EditableFileImage;","map":{"version":3,"names":["React","useRef","useState","Slider","Image","useOnClickOutside","compose","EditableFileImage","className","placeholder","value","width","onChangeImage","onChangeWidth","pdfMode","fileInput","widthWrapper","isEditing","setIsEditing","marks","handleClickOutside","handleUpload","current","click","handleChangeImage","files","length","reader","FileReader","addEventListener","result","readAsDataURL","handleChangeWidth","handleEdit","clearImage","maxWidth"],"sources":["/Volumes/Work/Work/react-invoice-generator-master/src/components/EditableFileImage.tsx"],"sourcesContent":["import React, { FC, useRef, useState } from 'react'\nimport Slider from 'rc-slider'\nimport { Image } from '@react-pdf/renderer'\nimport useOnClickOutside from '../hooks/useOnClickOutside'\nimport compose from '../styles/compose'\nimport 'rc-slider/assets/index.css'\n\ninterface Props {\n  className?: string\n  placeholder?: string\n  value?: string\n  width?: number\n  onChangeImage?: (value: string) => void\n  onChangeWidth?: (value: number) => void\n  pdfMode?: boolean\n}\n\nconst EditableFileImage: FC<Props> = ({ className, placeholder, value, width, onChangeImage, onChangeWidth, pdfMode }) => {\n  const fileInput = useRef<HTMLInputElement>(null)\n  const widthWrapper = useRef<HTMLDivElement>(null)\n  const [isEditing, setIsEditing] = useState<boolean>(false)\n  const marks = {\n    100: '100px',\n    150: '150px',\n    200: '200px',\n    250: '250px'\n  }\n\n  const handleClickOutside = () => {\n    if (isEditing) {\n      setIsEditing(false)\n    }\n  }\n\n  useOnClickOutside(widthWrapper, handleClickOutside)\n\n  const handleUpload = () => {\n    fileInput?.current?.click()\n  }\n\n  const handleChangeImage = () => {\n    if (fileInput?.current?.files) {\n      const files = fileInput.current.files\n\n      if (files.length > 0 && typeof onChangeImage === 'function') {\n        const reader = new FileReader()\n\n        reader.addEventListener('load', () => {\n          if (typeof reader.result === 'string') {\n            onChangeImage(reader.result)\n          }\n        })\n\n        reader.readAsDataURL(files[0])\n      }\n    }\n  }\n\n  const handleChangeWidth = (value: number) => {\n    if (typeof onChangeWidth === 'function') {\n      onChangeWidth(value)\n    }\n  }\n\n  const handleEdit = () => {\n    setIsEditing(!isEditing)\n  }\n\n  const clearImage = () => {\n    if (typeof onChangeImage === 'function') {\n      onChangeImage('')\n    }\n  }\n\n  if (pdfMode) {\n    if (value) {\n      return (\n        <Image\n          style={{...compose(`image ${className ? className : ''}`), maxWidth: width}}\n          src={value}\n        />\n      )\n    } else {\n      return <></>\n    }\n  }\n\n  return (\n    <div className={`image ${value ? 'mb-5' : ''} ${className ? className : ''}`}>\n      {!value ? (\n        <button\n          type=\"button\"\n          className=\"image__upload\"\n          onClick={handleUpload}\n        >\n          {placeholder}\n        </button>\n      ) : (\n        <>\n          <img\n            src={value}\n            className=\"image__img\"\n            alt={placeholder}\n            style={{ maxWidth: width || 100}}\n          />\n\n          <button\n            type=\"button\"\n            className=\"image__change\"\n            onClick={handleUpload}\n          >\n            Change Image\n          </button>\n\n          <button\n            type=\"button\"\n            className=\"image__edit\"\n            onClick={handleEdit}\n          >\n            Resize Image\n          </button>\n\n          <button\n            type=\"button\"\n            className=\"image__remove\"\n            onClick={clearImage}\n          >\n            Remove\n          </button>\n\n          {isEditing && (\n            <div ref={widthWrapper} className=\"image__width-wrapper\">\n              <Slider min={100} max={250} marks={marks} included={false} step={1} onChange={handleChangeWidth} defaultValue={width || 100} />\n            </div>\n          )}\n        </>\n      )}\n\n      <input\n        ref={fileInput}\n        tabIndex={-1}\n        type=\"file\"\n        accept=\"image/*\"\n        className=\"image__file\"\n        onChange={handleChangeImage}\n      />\n    </div>\n  )\n}\n\nexport default EditableFileImage\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}